<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imposter / –°–∞–º–æ–∑–≤–∞–Ω–µ—Ü</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --card-color: #2d2d2d;
            --text-color: #ffffff;
            --primary-color: #6200ea;
            --accent-color: #03dac6;
            --danger-color: #cf6679;
            --success-color: #4caf50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
        }

        .container {
            width: 90%;
            max-width: 500px;
            padding: 20px;
            background-color: var(--card-color);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        h1, h2 { margin-bottom: 20px; }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: transform 0.1s;
        }

        button:active { transform: scale(0.98); }
        button.secondary { background-color: #444; }
        button.danger { background-color: var(--danger-color); }

        input, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #333;
            border: 1px solid #555;
            color: white;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 1rem;
        }

        .hidden { display: none; }

        .role-reveal {
            font-size: 2rem;
            font-weight: bold;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .ru-text {
            font-size: 1.5rem;
            color: #ccc;
            font-weight: normal;
        }

        .is-imposter { color: var(--danger-color); }
        .is-citizen { color: var(--success-color); }
        .is-imposter .ru-text { color: #ff8a80; }

        .player-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .player-row button {
            width: auto;
            margin-top: 0;
            padding: 0 15px;
        }

        #timer-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--accent-color);
            margin: 20px 0;
        }

        .vote-btn {
            background-color: #444;
            margin-bottom: 8px;
        }

        .vote-btn.selected {
            background-color: var(--danger-color);
            border: 2px solid white;
        }

        .result-item {
            background: #333;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            text-align: left;
        }
    </style>
</head>
<body>

<div class="container">
    <div id="screen-setup">
        <h1>üïµÔ∏è Imposter</h1>

        <div style="text-align:left; margin-bottom:5px;">Difficulty</div>
        <select id="category-select"></select>

        <div style="text-align:left; margin-bottom:5px;">Number of Imposters</div>
        <select id="imposter-count">
            <option value="1">1 Imposter</option>
            <option value="2">2 Imposters</option>
            <option value="3">3 Imposters</option>
        </select>

        <div style="text-align:left; margin: 15px 0 5px;">Players</div>
        <div id="player-inputs">
            </div>
        <button class="secondary" onclick="addPlayerInput()">+ Add Player</button>

        <hr style="border-color:#444; margin: 20px 0;">

        <button onclick="startGame()">Start Game</button>
    </div>

    <div id="screen-pass" class="hidden">
        <h2>Pass to...</h2>
        <h1 id="pass-name" style="color: var(--accent-color); font-size: 2.5rem;">Player Name</h1>
        <p>Ensure no one else is looking!</p>
        <button onclick="revealRole()">I am <span id="btn-name">Player</span></button>
    </div>

    <div id="screen-reveal" class="hidden">
        <div id="role-container" class="role-reveal">
            </div>
        <p id="word-desc">Memorize this! / –ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–æ!</p>
    </div>

    <div id="screen-timer" class="hidden">
        <h2>Discussion Time</h2>
        <div id="timer-display">3:00</div>
        <p>Ask questions. Find the Imposter.</p>
        <button class="danger" onclick="endTimer()">Vote Now</button>
    </div>

    <div id="screen-vote" class="hidden">
        <h2>Who is the Imposter?</h2>
        <p>Tap the suspects.</p>
        <div id="voting-list"></div>
        <button onclick="showResults()">Reveal Truth</button>
    </div>

    <div id="screen-results" class="hidden">
        <h1>Results</h1>
        <div id="results-list"></div>
        <button onclick="resetGame()">Play Again</button>
    </div>
</div>

<script>
    // --- DATA (ENGLISH & RUSSIAN) ---
const categories = {
    "Easy": [
        // Animals
        { en: "Cat", ru: "–ö–æ—Ç" }, { en: "Lion", ru: "–õ–µ–≤" }, { en: "Elephant", ru: "–°–ª–æ–Ω" },
        { en: "Dog", ru: "–°–æ–±–∞–∫–∞" }, { en: "Cow", ru: "–ö–æ—Ä–æ–≤–∞" }, { en: "Bird", ru: "–ü—Ç–∏—Ü–∞" },
        // Food
        { en: "Pizza", ru: "–ü–∏—Ü—Ü–∞" }, { en: "Hamburger", ru: "–ì–∞–º–±—É—Ä–≥–µ—Ä" }, { en: "Ice Cream", ru: "–ú–æ—Ä–æ–∂–µ–Ω–æ–µ" },
        { en: "Apple", ru: "–Ø–±–ª–æ–∫–æ" }, { en: "Banana", ru: "–ë–∞–Ω–∞–Ω" }, { en: "Bread", ru: "–•–ª–µ–±" },
        // Places
        { en: "School", ru: "–®–∫–æ–ª–∞" }, { en: "Hospital", ru: "–ë–æ–ª—å–Ω–∏—Ü–∞" }, { en: "Beach", ru: "–ü–ª—è–∂" },
        { en: "House", ru: "–î–æ–º" }, { en: "Shop", ru: "–ú–∞–≥–∞–∑–∏–Ω" }, { en: "Street", ru: "–£–ª–∏—Ü–∞" },
        // Jobs
        { en: "Doctor", ru: "–í—Ä–∞—á" }, { en: "Teacher", ru: "–£—á–∏—Ç–µ–ª—å" }, { en: "Police", ru: "–ü–æ–ª–∏—Ü–µ–π—Å–∫–∏–π" },
        { en: "Driver", ru: "–í–æ–¥–∏—Ç–µ–ª—å" }, { en: "Singer", ru: "–ü–µ–≤–µ—Ü" },
        // Household
        { en: "Bed", ru: "–ö—Ä–æ–≤–∞—Ç—å" }, { en: "TV", ru: "–¢–µ–ª–µ–≤–∏–∑–æ—Ä" }, { en: "Table", ru: "–°—Ç–æ–ª" },
        { en: "Sofa", ru: "–î–∏–≤–∞–Ω" }, { en: "Chair", ru: "–°—Ç—É–ª" }, { en: "Window", ru: "–û–∫–Ω–æ" }, { en: "Door", ru: "–î–≤–µ—Ä—å" }
    ],
    "Medium": [
        // Animals
        { en: "Penguin", ru: "–ü–∏–Ω–≥–≤–∏–Ω" }, { en: "Shark", ru: "–ê–∫—É–ª–∞" }, { en: "Panda", ru: "–ü–∞–Ω–¥–∞" },
        { en: "Giraffe", ru: "–ñ–∏—Ä–∞—Ñ" }, { en: "Zebra", ru: "–ó–µ–±—Ä–∞" }, { en: "Wolf", ru: "–í–æ–ª–∫" }, { en: "Fox", ru: "–õ–∏—Å–∞" },
        // Food
        { en: "Sushi", ru: "–°—É—à–∏" }, { en: "Spaghetti", ru: "–°–ø–∞–≥–µ—Ç—Ç–∏" }, { en: "Donut", ru: "–ü–æ–Ω—á–∏–∫" },
        { en: "Soup", ru: "–°—É–ø" }, { en: "Chocolate", ru: "–®–æ–∫–æ–ª–∞–¥" }, { en: "Honey", ru: "–ú–µ–¥" }, { en: "Cheese", ru: "–°—ã—Ä" },
        // Places
        { en: "Airport", ru: "–ê—ç—Ä–æ–ø–æ—Ä—Ç" }, { en: "Library", ru: "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞" }, { en: "Cinema", ru: "–ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä" },
        { en: "Park", ru: "–ü–∞—Ä–∫" }, { en: "Stadium", ru: "–°—Ç–∞–¥–∏–æ–Ω" }, { en: "Pharmacy", ru: "–ê–ø—Ç–µ–∫–∞" }, { en: "Bank", ru: "–ë–∞–Ω–∫" },
        // Jobs
        { en: "Firefighter", ru: "–ü–æ–∂–∞—Ä–Ω—ã–π" }, { en: "Chef", ru: "–ü–æ–≤–∞—Ä" }, { en: "Pilot", ru: "–ü–∏–ª–æ—Ç" },
        { en: "Artist", ru: "–•—É–¥–æ–∂–Ω–∏–∫" }, { en: "Scientist", ru: "–£—á–µ–Ω—ã–π" }, { en: "Lawyer", ru: "–ê–¥–≤–æ–∫–∞—Ç" },
        // Household
        { en: "Fridge", ru: "–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫" }, { en: "Lamp", ru: "–õ–∞–º–ø–∞" }, { en: "Clock", ru: "–ß–∞—Å—ã" },
        { en: "Mirror", ru: "–ó–µ—Ä–∫–∞–ª–æ" }, { en: "Microwave", ru: "–ú–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞" }, { en: "Vacuum", ru: "–ü—ã–ª–µ—Å–æ—Å" }, { en: "Iron", ru: "–£—Ç—é–≥" }
    ],
    "Hard": [
        // Animals
        { en: "Kangaroo", ru: "–ö–µ–Ω–≥—É—Ä—É" }, { en: "Sloth", ru: "–õ–µ–Ω–∏–≤–µ—Ü" }, { en: "Eagle", ru: "–û—Ä–µ–ª" },
        { en: "Platypus", ru: "–£—Ç–∫–æ–Ω–æ—Å" }, { en: "Jellyfish", ru: "–ú–µ–¥—É–∑–∞" }, { en: "Hedgehog", ru: "–ï–∂" }, { en: "Bat", ru: "–õ–µ—Ç—É—á–∞—è –º—ã—à—å" },
        // Food
        { en: "Taco", ru: "–¢–∞–∫–æ" }, { en: "Pancake", ru: "–ë–ª–∏–Ω—á–∏–∫" }, { en: "Steak", ru: "–°—Ç–µ–π–∫" },
        { en: "Omelette", ru: "–û–º–ª–µ—Ç" }, { en: "Lasagna", ru: "–õ–∞–∑–∞–Ω—å—è" }, { en: "Croissant", ru: "–ö—Ä—É–∞—Å—Å–∞–Ω" }, { en: "Caviar", ru: "–ò–∫—Ä–∞" },
        // Places
        { en: "Gym", ru: "–°–ø–æ—Ä—Ç–∑–∞–ª" }, { en: "Hotel", ru: "–û—Ç–µ–ª—å" }, { en: "Museum", ru: "–ú—É–∑–µ–π" },
        { en: "Greenhouse", ru: "–¢–µ–ø–ª–∏—Ü–∞" }, { en: "Embassy", ru: "–ü–æ—Å–æ–ª—å—Å—Ç–≤–æ" }, { en: "Observatory", ru: "–û–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏—è" }, { en: "Cemetery", ru: "–ö–ª–∞–¥–±–∏—â–µ" },
        // Jobs
        { en: "Programmer", ru: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç" }, { en: "Farmer", ru: "–§–µ—Ä–º–µ—Ä" }, { en: "Dentist", ru: "–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥" },
        { en: "Jeweler", ru: "–Æ–≤–µ–ª–∏—Ä" }, { en: "Archaeologist", ru: "–ê—Ä—Ö–µ–æ–ª–æ–≥" }, { en: "Architect", ru: "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä" },
        // Household
        { en: "Toaster", ru: "–¢–æ—Å—Ç–µ—Ä" }, { en: "Blender", ru: "–ë–ª–µ–Ω–¥–µ—Ä" }, { en: "Kettle", ru: "–ß–∞–π–Ω–∏–∫" },
        { en: "Humidifier", ru: "–£–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—å" }, { en: "Radiator", ru: "–ë–∞—Ç–∞—Ä–µ—è" }, { en: "Telescope", ru: "–¢–µ–ª–µ—Å–∫–æ–ø" }, { en: "Compass", ru: "–ö–æ–º–ø–∞—Å" }
    ]
};

    // --- STATE ---
    let players = []; // { name: "", role: "", wordObj: {en, ru} }
    let currentPlayerIndex = 0;
    let timerInterval;
    let selectedSuspects = new Set();
    let currentCategory = "";
    let currentSecretWordObj = {};

    // --- INIT ---
    window.onload = () => {
        const catSelect = document.getElementById('category-select');
        Object.keys(categories).forEach(cat => {
            let opt = document.createElement('option');
            opt.value = cat;
            opt.innerText = cat;
            catSelect.appendChild(opt);
        });

        // Add initial 3 inputs
        addPlayerInput();
        addPlayerInput();
        addPlayerInput();
    };

    function addPlayerInput() {
        const div = document.createElement('div');
        div.className = 'player-row';
        div.innerHTML = `
            <input type="text" class="name-input" placeholder="Player Name" value="Player ${document.querySelectorAll('.name-input').length + 1}">
            ${document.querySelectorAll('.name-input').length > 2 ? '<button class="danger" onclick="this.parentElement.remove()" style="width:auto">X</button>' : ''}
        `;
        document.getElementById('player-inputs').appendChild(div);
    }

    // --- GAME LOGIC ---
    function startGame() {
        const nameInputs = document.querySelectorAll('.name-input');
        const imposterCount = parseInt(document.getElementById('imposter-count').value);
        const category = document.getElementById('category-select').value;

        // 1. Validate
        let tempNames = [];
        nameInputs.forEach(input => {
            if(input.value.trim()) tempNames.push(input.value.trim());
        });

        if (tempNames.length < 3) {
            alert("You need at least 3 players!");
            return;
        }
        if (imposterCount >= tempNames.length) {
            alert("Too many imposters for this player count!");
            return;
        }

        // 2. Setup Data
        currentCategory = category;
        const words = categories[category];
        // Select random word object {en, ru}
        currentSecretWordObj = words[Math.floor(Math.random() * words.length)];

        // Create player objects
        players = tempNames.map(name => ({
            name: name,
            role: 'citizen',
            wordObj: currentSecretWordObj
        }));

        // Assign Imposters
        let impostersAssigned = 0;
        while (impostersAssigned < imposterCount) {
            let rand = Math.floor(Math.random() * players.length);
            if (players[rand].role !== 'imposter') {
                players[rand].role = 'imposter';
                // We set a special object for imposters so logic remains consistent
                players[rand].wordObj = { en: "YOU ARE THE IMPOSTER", ru: "–í–´ –°–ê–ú–û–ó–í–ê–ù–ï–¶" };
                impostersAssigned++;
            }
        }

        // 3. Start Loop
        currentPlayerIndex = 0;
        showScreen('screen-pass');
        updatePassScreen();
    }

    function updatePassScreen() {
        const p = players[currentPlayerIndex];
        document.getElementById('pass-name').innerText = p.name;
        document.getElementById('btn-name').innerText = p.name;
    }

    function revealRole() {
        showScreen('screen-reveal');
        const p = players[currentPlayerIndex];
        const roleContainer = document.getElementById('role-container');
        const descText = document.getElementById('word-desc');

        if (p.role === 'imposter') {
            roleContainer.className = "role-reveal is-imposter";
            roleContainer.innerHTML = `
                <span>${p.wordObj.en}</span>
                <span class="ru-text">${p.wordObj.ru}</span>
            `;
            descText.innerText = `Try to blend in! / –ü–æ—Å—Ç–∞—Ä–∞–π—Å—è —Å–º–µ—à–∞—Ç—å—Å—è —Å —Ç–æ–ª–ø–æ–π!`;
        } else {
            roleContainer.className = "role-reveal is-citizen";
            roleContainer.innerHTML = `
                <span>${p.wordObj.en}</span>
                <span class="ru-text">${p.wordObj.ru}</span>
            `;
            descText.innerText = `Category: ${currentCategory}`;
        }

        // Auto hide after 3 seconds
        setTimeout(() => {
            currentPlayerIndex++;
            if (currentPlayerIndex < players.length) {
                showScreen('screen-pass');
                updatePassScreen();
            } else {
                startTimerPhase();
            }
        }, 3000);
    }

    // --- TIMER ---
    function startTimerPhase() {
        showScreen('screen-timer');
        let timeLeft = 180; // 3 minutes
        const display = document.getElementById('timer-display');

        timerInterval = setInterval(() => {
            timeLeft--;
            let m = Math.floor(timeLeft / 60);
            let s = timeLeft % 60;
            display.innerText = `${m}:${s < 10 ? '0'+s : s}`;

            if (timeLeft <= 0) endTimer();
        }, 1000);
    }

    function endTimer() {
        clearInterval(timerInterval);
        setupVoting();
    }

    // --- VOTING ---
    function setupVoting() {
        showScreen('screen-vote');
        const list = document.getElementById('voting-list');
        list.innerHTML = '';
        selectedSuspects.clear();

        players.forEach(p => {
            const btn = document.createElement('button');
            btn.className = 'vote-btn';
            btn.innerText = p.name;
            btn.onclick = () => {
                if (selectedSuspects.has(p.name)) {
                    selectedSuspects.delete(p.name);
                    btn.classList.remove('selected');
                } else {
                    selectedSuspects.add(p.name);
                    btn.classList.add('selected');
                }
            };
            list.appendChild(btn);
        });
    }

    function showResults() {
        showScreen('screen-results');
        const list = document.getElementById('results-list');
        list.innerHTML = '';

        // Header showing the word
        list.innerHTML += `<div style="margin-bottom:20px; color:var(--accent-color)">
            Secret Word: <strong>${currentSecretWordObj.en} / ${currentSecretWordObj.ru}</strong>
        </div>`;

        players.forEach(p => {
            const div = document.createElement('div');
            div.className = 'result-item';

            let status = '';
            if (p.role === 'imposter') {
                status = `<span style="color:var(--danger-color); font-weight:bold;">IMPOSTER</span>`;
            } else {
                status = `<span style="color:var(--success-color);">CITIZEN</span>`;
            }

            let voteStatus = '';
            if (selectedSuspects.has(p.name)) {
                voteStatus = ` <span style="font-size:0.8rem; border:1px solid #666; padding:2px 5px; border-radius:4px;">VOTED OUT</span>`;
            }

            div.innerHTML = `<strong>${p.name}</strong> was ${status} ${voteStatus}`;
            list.appendChild(div);
        });
    }

    function resetGame() {
        showScreen('screen-setup');
    }

    // --- UTILS ---
    function showScreen(id) {
        document.querySelectorAll('.container > div').forEach(div => div.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }
</script>

</body>
</html>
